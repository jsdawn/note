import{_ as s,o as a,c as n,d as l}from"./app.8ce59ef4.js";const A=JSON.parse('{"title":"Element UI 日期组件范围选择","description":"","frontmatter":{"title":"Element UI 日期组件范围选择"},"headers":[{"level":2,"title":"具体需求","slug":"具体需求","link":"#具体需求","children":[]},{"level":2,"title":"效果图","slug":"效果图","link":"#效果图","children":[]},{"level":2,"title":"解决方案","slug":"解决方案","link":"#解决方案","children":[]},{"level":2,"title":"结语","slug":"结语","link":"#结语","children":[]}],"relativePath":"feelings/el-date-picker.md","lastUpdated":1658748507000}'),p={name:"feelings/el-date-picker.md"},e=l(`<h1 id="datepicker-日期组件-范围选择控制" tabindex="-1">DatePicker 日期组件 - 范围选择控制 <a class="header-anchor" href="#datepicker-日期组件-范围选择控制" aria-hidden="true">#</a></h1><blockquote><p>当前版本 <code>element-ui@2.x</code>，日期组件 <code>el-date-picker</code></p></blockquote><h2 id="具体需求" tabindex="-1">具体需求 <a class="header-anchor" href="#具体需求" aria-hidden="true">#</a></h2><p>选择范围日期，最多可连续选择 7 天</p><h2 id="效果图" tabindex="-1">效果图 <a class="header-anchor" href="#效果图" aria-hidden="true">#</a></h2><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9e5e733f8b1d4e7aa358c78305e9bc36~tplv-k3u1fbpfcp-watermark.image?" alt="971655263896_.pic.jpg"></p><h2 id="解决方案" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案" aria-hidden="true">#</a></h2><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">&lt;el-date-picker</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  v-model=&quot;selDate&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  type=&quot;daterange&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  unlink-panels</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  range-separator=&quot;至&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  start-placeholder=&quot;开始日期&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  end-placeholder=&quot;结束日期&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  :picker-options=&quot;{</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    disabledDate: this.onDisabledDate,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    onPick: this.onPick</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  }&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">&gt;&lt;/el-date-picker&gt;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">data</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    currPickDate</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{},</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 当前选择日期</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">methods</span><span style="color:#89DDFF;">:{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 选中日期会重新触发日历每个日期的状态</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 可利用这点，在选择了一个日期之后，控制其他日期的可选状态</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">onDisabledDate</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">date</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// 7天转换时间搓长度</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">rangeTime</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">7</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">24</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">60</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">60</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// 选中第一个日期（minDate有值），控制前后日期状态</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">currPickDate</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">minDate</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!this.</span><span style="color:#A6ACCD;">currPickDate</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">maxDate</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">minDateTime</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Date</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">currPickDate</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">minDate</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getTime</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">dateTime</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Date</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">date</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getTime</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">minDateTime</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">dateTime</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 禁用前后7天的日期</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Math</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">abs</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">minDateTime</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">dateTime</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">rangeTime</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 选中日期后执行回调，只有当 daterange 或 datetimerange 才生效</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 返回对象 包含起始值和结束值 { maxDate, minDate }</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 每次重新选中一个日期都会以 minDate 开始，此时 maxDate 为null</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 选中两个日期范围后 minDate，maxDate都有值</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">onPick</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">pickDate</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">currPickDate</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">pickDate</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="结语" tabindex="-1">结语 <a class="header-anchor" href="#结语" aria-hidden="true">#</a></h2><p>博观而约取，厚积而薄发。</p><blockquote><p><strong>转载声明</strong>： 请注明作者，注明原文链接，有疑问致邮 <a href="mailto:kingwyh1993@163.com" target="_blank" rel="noreferrer">kingwyh1993@163.com</a></p></blockquote>`,11),o=[e];function t(c,r,y,i,F,D){return a(),n("div",null,o)}const C=s(p,[["render",t]]);export{A as __pageData,C as default};
